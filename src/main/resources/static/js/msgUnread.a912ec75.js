(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["msgUnread"],{"05c6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("search-form",{attrs:{searchFields:e.searchFields,pmd:8},on:{search:e.handleSearchEvent}}),a("a-list",{attrs:{itemLayout:"horizontal",size:"large",loading:e.loading,pagination:e.pagination,dataSource:e.data},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{key:"item.title"},[a("a-button",{attrs:{slot:"actions",type:"link"},on:{click:function(a){return e.handleRead(t.id)}},slot:"actions"},[e._v("已读")]),a("a-list-item-meta",{attrs:{description:t.content}},[a("a",{attrs:{slot:"title",href:t.href},slot:"title"},[e._v(e._s(t.title))]),a("a-avatar",{attrs:{slot:"avatar",src:e.fileServer+"/"+t.logo},slot:"avatar"})],1)],1)}}])})],1)},n=[],i=(a("4de4"),a("d3b7"),a("5723")),o=a("1afd"),s={name:"MsgUnread",components:{SearchForm:o["a"]},data:function(){var e=this;return{loading:!1,data:[],searchFields:[{name:"标题",code:"title"},{name:"内容",code:"content"},{name:"开始时间",code:"start",type:"datetime"},{name:"结束时间",code:"end",type:"datetime"}],filter:{},pagination:{total:0,current:1,pageSize:6,onChange:function(t,a){e.pagination.current=t,e.pagination.pageSize=a,e.loadData()}}}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0;var t={filter:this.filter,current:this.pagination.current,pageSize:this.pagination.pageSize};Object(i["f"])(t).then((function(t){e.data=t.data.records,e.pagination.current=t.data.current,e.pagination.total=t.data.total,e.pagination.pageSize=t.data.pageSize,t.status&&e.$store.commit("SET_UNREAD_COUNT",t.data.total)})).finally((function(){e.loading=!1}))},handleSearchEvent:function(e){this.pagination.current=1,this.pagination.total=0,this.filter=e,this.loadData()},handleRead:function(e){var t=this;Object(i["h"])(e).then((function(e){e.status&&t.loadData()}))}}},c=s,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports},"1afd":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{ref:"searchForm",attrs:{layout:"inline",form:e.form}},[a("a-row",{attrs:{gutter:20}},[e._l(e.searchFields,(function(t,r){return r<e.size?a("a-col",{key:r,attrs:{md:e.cmd,sm:24}},[a("a-form-item",{attrs:{label:t.name}},[t.type&&"input"!==t.type?"select"===t.type?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{placeholder:"请选择"+t.name}},e._l(t.list,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value?t.value:t.label}},[e._v(e._s(t.label?t.label:t.value)+" ")])})),1):"date"===t.type?a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{placeholder:"请选择"+t.name}}):"datetime"===t.type?a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{"show-time":"",placeholder:"请选择"+t.name}}):"radio"===t.type?a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}]},e._l(t.list,(function(t,r){return a("a-radio",{key:r,attrs:{value:t.value?t.value:t.label}},[e._v(" "+e._s(t.label?t.label:t.value)+" ")])})),1):[e._v("类型不支持")]:a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{placeholder:"请输入"+t.name},on:{pressEnter:e.handleSearch}})],2)],1):e._e()})),e.advanced?e._l(e.searchFields,(function(t,r){return r>=e.size?a("a-col",{key:r,attrs:{md:e.cmd,sm:24}},[a("a-form-item",{attrs:{label:t.name}},[t.type&&"input"!==t.type?"select"===t.type?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{placeholder:"请选择"+t.name}},e._l(t.list,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value?t.value:t.label}},[e._v(e._s(t.label?t.label:t.value)+" ")])})),1):"date"===t.type?a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{placeholder:"请选择"+t.name}}):"datetime"===t.type?a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{"show-time":"",placeholder:"请选择"+t.name}}):"radio"===t.type?a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}]},e._l(t.list,(function(t,r){return a("a-radio",{key:r,attrs:{value:t.value?t.value:t.label}},[e._v(" "+e._s(t.label?t.label:t.value)+" ")])})),1):[e._v("类型不支持")]:a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.code],expression:"[item.code]"}],attrs:{placeholder:"请输入"+t.name},on:{pressEnter:e.handleSearch}})],2)],1):e._e()})):e._e(),e.searchFields.length>e.size?a("a-col",{attrs:{md:!e.advanced&&e.cmd||24,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-right":"10px"},on:{click:e.handleReset}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)]):a("a-col",{attrs:{md:e.cmd,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("a-button",{on:{click:e.handleReset}},[e._v("重置")])],1)])],2)],1)],1)},n=[],i=(a("d81d"),a("a9e3"),a("4042")),o={name:"SearchForm",data:function(){return{form:this.$form.createForm(this),advanced:!1,dateFmt:"YYYY-MM-DD",datetimeFmt:"YYYY-MM-DD HH:mm:ss"}},props:{searchFields:{type:Array},pmd:{type:Number,default:6}},computed:{cmd:function(){var e=this.pmd;return 6===e||8===e||12===e?e:6},size:function(){var e=this.pmd;return 6===e||8===e||12===e?24/e-1:3}},methods:{handleSearch:function(){var e=this,t=[],a=[];this.searchFields.map((function(e,r){"date"===e.type&&t.push(e.code),"datetime"===e.type&&a.push(e.code)}));var r=this.form.getFieldsValue();t.map((function(t){r[t]&&(r[t]=r[t].format(e.dateFmt))})),a.map((function(t){r[t]&&(r[t]=r[t].format(e.datetimeFmt))})),r=Object(i["b"])(r),this.$emit("search",r)},handleReset:function(){this.form.resetFields(),this.handleSearch()},toggleAdvanced:function(){this.advanced=!this.advanced}}},s=o,c=a("2877"),l=Object(c["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},4042:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));a("d81d"),a("b64b"),a("498a");function r(e){return void 0===e||null===e||""===e.trim()}function n(e){return!r(e)}function i(e){var t={};for(var a in e)n(e[a])&&(t[a]=e[a]);return t}var o=function(){return{title:"",mode:"",visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:19}}},confirmLoading:!1,form:{}}}}}]);