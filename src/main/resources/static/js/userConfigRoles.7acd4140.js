(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userConfigRoles"],{4042:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));a("d81d"),a("b64b"),a("498a");function o(e){return void 0===e||null===e||""===e.trim()}function n(e){return!o(e)}function s(e){var t={};for(var a in e)n(e[a])&&(t[a]=e[a]);return t}var l=function(){return{title:"",mode:"",visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:19}}},confirmLoading:!1,form:{}}}},8930:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"k",(function(){return r})),a.d(t,"h",(function(){return i})),a.d(t,"j",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"f",(function(){return h})),a.d(t,"b",(function(){return R})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return g}));a("99af");var o=a("b775"),n={list:"/sys/user/list",add:"/sys/user/add",update:"/sys/user/update",remove:"/sys/user/remove",toggleState:"/sys/user/toggle-state",resetPwd:"/sys/user/reset-pwd",listNoRoles:"/sys/user/list-no-roles",listHaveRoles:"/sys/user/list-have-roles",addUserRoles:"/sys/user/add-user-roles",delUserRoles:"/sys/user/del-user-roles",detail:"/sys/user/detail"};function s(e){return Object(o["b"])({url:n.list,method:"post",data:e})}function l(e){return Object(o["b"])({url:n.add,method:"post",data:e})}function r(e,t){return Object(o["b"])({url:"".concat(n.update,"/").concat(e),method:"post",data:t})}function i(e){return Object(o["b"])({url:"".concat(n.remove,"/").concat(e),method:"get"})}function c(e){return Object(o["b"])({url:"".concat(n.toggleState,"/").concat(e),method:"get"})}function d(e){return Object(o["b"])({url:"".concat(n.resetPwd,"/").concat(e),method:"get"})}function u(e,t){return Object(o["b"])({url:"".concat(n.listNoRoles,"/").concat(e),method:"post",data:t})}function h(e,t){return Object(o["b"])({url:"".concat(n.listHaveRoles,"/").concat(e),method:"post",data:t})}function R(e,t){return Object(o["b"])({url:"".concat(n.addUserRoles,"/").concat(e),method:"post",data:t})}function p(e,t){return Object(o["b"])({url:"".concat(n.delUserRoles,"/").concat(e),method:"post",data:t})}function g(e){return Object(o["b"])({url:"".concat(n.detail,"/").concat(e),method:"get"})}},ccfb:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:8}},[a("a-col",{attrs:{xs:24,sm:24,md:7}},[a("a-card",{attrs:{size:e.defaultSize,bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:5}},[a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:24}},[e.noRoles.selectedRowKeys.length>0?[e._v(" "+e._s("已选 "+e.noRoles.selectedRowKeys.length+" 个角色")+" ")]:[e._v(" 选择需要添加的角色 ")]],2),a("a-col",{attrs:{xs:18}},[a("a-form-item",{attrs:{label:"角色"}},[a("a-input",{attrs:{placeholder:"输入角色筛选"},model:{value:e.noRoles.query.key,callback:function(t){e.$set(e.noRoles.query,"key",t)},expression:"noRoles.query.key"}})],1)],1),a("a-col",{attrs:{xs:3}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{shape:"circle"},on:{click:e.noRolesHandleSearch}},[a("a-icon",{attrs:{type:"search"}})],1)],1)]),a("a-col",{attrs:{xs:3}},[a("a-tooltip",{attrs:{title:"添加",placement:"top"}},[a("a-button",{attrs:{shape:"circle",icon:"plus",type:"primary",disabled:0===e.noRoles.selectedRowKeys.length,loading:e.noRoles.addBtnLoading},on:{click:e.handleAddUserRoles}})],1)],1)],1)],1)],1),a("a-table",{attrs:{bordered:!1,columns:e.noRoles.columns,loading:e.noRoles.loading,dataSource:e.noRoles.data,pagination:e.noRoles.pagination,rowSelection:{selectedRowKeys:e.noRoles.selectedRowKeys,onChange:e.noRolesOnSelectChange},rowKey:function(e){return e.id}},on:{change:e.noRolesHandleChange},scopedSlots:e._u([{key:"name",fn:function(t,o){return a("span",{},["ON"===o.state?a("span",[e._v(e._s(t)+"/"+e._s(o.id))]):a("span",{staticStyle:{color:"red"}},[e._v(e._s(t)+"/"+e._s(o.id))])])}}])})],1)],1),a("a-col",{attrs:{xs:24,sm:24,md:17}},[a("a-card",{attrs:{loading:e.user.loading,bordered:!1}},[a("a-card-meta",[a("a",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.user.username)+" "),e.user.nickname?[e._v(" - "+e._s(e.user.nickname))]:e._e()],2),a("a-avatar",{staticClass:"card-avatar",attrs:{slot:"avatar",src:e.fileServer+"/"+e.user.avatar,size:64},slot:"avatar"}),a("div",{staticClass:"meta-content",attrs:{slot:"description"},slot:"description"},[a("a-row",[a("a-col",{attrs:{xs:12}},[e._v("电话: "+e._s(e.user.phone))]),a("a-col",{attrs:{xs:12}},[e._v("邮箱: "+e._s(e.user.email))])],1),e.user.intro?a("a-row",[a("a-col",{attrs:{xs:24}},[e._v(e._s(e.user.intro))])],1):e._e()],1)],1)],1),a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{xs:12}},[a("a-tooltip",{attrs:{title:"移除",placement:"top"}},[a("a-button",{attrs:{shape:"circle",icon:"delete",type:"danger",disabled:0===e.haveRoles.selectedRowKeys.length,loading:e.haveRoles.delBtnLoading},on:{click:e.handleDelUserRoles}})],1),e.haveRoles.selectedRowKeys.length>0?a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s("已选 "+e.haveRoles.selectedRowKeys.length+" 个角色")+" ")]):e._e()],1),a("a-col",{staticStyle:{"text-align":"right"},attrs:{xs:10}},[a("a-form-item",{attrs:{label:"角色"}},[a("a-input",{attrs:{placeholder:"请输入角色筛选"},model:{value:e.haveRoles.query.key,callback:function(t){e.$set(e.haveRoles.query,"key",t)},expression:"haveRoles.query.key"}})],1)],1),a("a-col",{attrs:{xs:2}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{shape:"circle"},on:{click:e.haveRolesHandleSearch}},[a("a-icon",{attrs:{type:"search"}})],1)],1)])],1)],1)],1),a("a-table",{attrs:{bordered:!1,columns:e.haveRoles.columns,loading:e.haveRoles.loading,dataSource:e.haveRoles.data,rowSelection:{selectedRowKeys:e.haveRoles.selectedRowKeys,onChange:e.haveRolesOnSelectChange},pagination:e.haveRoles.pagination,rowKey:function(e){return e.id}},on:{change:e.haveRolesHandleChange},scopedSlots:e._u([{key:"name",fn:function(t,o){return a("span",{},["ON"===o.state?a("span",[e._v(e._s(t)+"/"+e._s(o.id))]):a("span",{staticStyle:{color:"red"}},[e._v(e._s(t)+"/"+e._s(o.id))])])}}])})],1)],1)],1)},n=[],s=(a("d3b7"),a("8930")),l=a("4042"),r={name:"UserConfigRoles",data:function(){return{defaultSize:"small",user:{loading:!0,nickname:"",username:"",avatar:"",phone:"",email:"",intro:""},noRoles:{loading:!1,columns:[{title:"角色",dataIndex:"name",scopedSlots:{customRender:"name"}}],data:[],query:{key:""},pagination:{total:0,current:1,pageSize:8},selectedRowKeys:[],addBtnLoading:!1},haveRoles:{loading:!1,columns:[{title:"角色",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"介绍",dataIndex:"intro",width:"40%"},{title:"创建人",dataIndex:"creater"},{title:"创建时间",dataIndex:"createTime"}],data:[],query:{key:""},pagination:{total:0,current:1,pageSize:5},selectedRowKeys:[],delBtnLoading:!1}}},computed:{noRolesFilter:function(){return Object(l["b"])(this.noRoles.query)},haveRolesFilter:function(){return Object(l["b"])(this.haveRoles.query)}},mounted:function(){this.loadUserInfo(),this.loadNoRolesData(),this.loadHaveRolesData()},methods:{loadUserInfo:function(){var e=this,t=this.$route.params.userId;Object(s["d"])(t).then((function(t){t.status&&(e.user.username=t.data.id,e.user.phone=t.data.phone,e.user.email=t.data.email,e.user.avatar=t.data.avatar,e.user.intro=t.data.intro,e.user.nickname=t.data.nickname)})).finally((function(){e.user.loading=!1}))},loadNoRolesData:function(){var e=this,t=this.$route.params.userId;this.noRoles.selectedRowKeys=[],this.noRoles.loading=!0;var a={filter:this.noRolesFilter,current:this.noRoles.pagination.current,pageSize:this.noRoles.pagination.pageSize};Object(s["g"])(t,a).then((function(t){e.noRoles.data=t.data.records,e.noRoles.pagination.current=t.data.current,e.noRoles.pagination.total=t.data.total,e.noRoles.pagination.pageSize=t.data.pageSize})).finally((function(){e.noRoles.loading=!1}))},noRolesOnSelectChange:function(e){this.noRoles.selectedRowKeys=e},noRolesHandleChange:function(e){this.noRoles.pagination=e,this.loadNoRolesData()},noRolesHandleSearch:function(){this.noRoles.pagination.current=1,this.noRoles.pagination.total=0,this.loadNoRolesData()},handleAddUserRoles:function(){var e=this;this.noRoles.addBtnLoading=!0;var t=this.$route.params.userId;Object(s["b"])(t,this.noRoles.selectedRowKeys).then((function(t){t.status&&(e.haveRoles.pagination.current=1,e.haveRoles.pagination.total=0,e.loadHaveRolesData(),e.noRoles.pagination.current=1,e.noRoles.pagination.total=0,e.loadNoRolesData())})).finally((function(){e.noRoles.addBtnLoading=!1}))},loadHaveRolesData:function(){var e=this,t=this.$route.params.userId;this.haveRoles.selectedRowKeys=[],this.haveRoles.loading=!0;var a={filter:this.haveRolesFilter,current:this.haveRoles.pagination.current,pageSize:this.haveRoles.pagination.pageSize};Object(s["f"])(t,a).then((function(t){e.haveRoles.data=t.data.records,e.haveRoles.pagination.current=t.data.current,e.haveRoles.pagination.total=t.data.total,e.haveRoles.pagination.pageSize=t.data.pageSize})).finally((function(){e.haveRoles.loading=!1}))},haveRolesOnSelectChange:function(e){this.haveRoles.selectedRowKeys=e},haveRolesHandleChange:function(e){this.haveRoles.pagination=e,this.loadHaveRolesData()},haveRolesHandleSearch:function(){this.haveRoles.pagination.current=1,this.haveRoles.pagination.total=0,this.loadHaveRolesData()},handleDelUserRoles:function(){var e=this;this.haveRoles.addBtnLoading=!0;var t=this.$route.params.userId;Object(s["c"])(t,this.haveRoles.selectedRowKeys).then((function(t){t.status&&(e.noRoles.pagination.current=1,e.noRoles.pagination.total=0,e.loadNoRolesData(),e.haveRoles.pagination.current=1,e.haveRoles.pagination.total=0,e.loadHaveRolesData())})).finally((function(){e.noRoles.addBtnLoading=!1}))}}},i=r,c=a("2877"),d=Object(c["a"])(i,o,n,!1,null,null,null);t["default"]=d.exports}}]);